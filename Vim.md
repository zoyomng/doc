### Vim

***\*vi/vim的使用\****
基本上vi/vim共分为三种模式，分别是:
***\*命令模式\****（Commandmode）
***\*输入模式\****（Insertmode）
***\*底线命令模式\****（Lastlinemode）。
这三种模式的作用分别是：

### ***\*1.命令模式：\****

***\*用户刚刚启动vi/vim，便进入了命令模式。\****

此状态下敲击键盘动作会被Vim识别为命令，而非输入字符。比如我们此时按下i，并不会输入一个字符，i被当作了一个命令。

以下是常用的几个命令：

| ***\*命令\**** | ***\*说明\****               |
| -------------- | ---------------------------- |
| ***\*i\****    | 切换到输入模式，以输入字符。 |
| ***\*x\****    | 删除当前光标所在处的字符。   |
| ***\*:\****    | 切换到底线命令模式。         |

若想要***\*编辑文本\****：启动Vim，进入了命令模式，按下i，切换到输入模式。

命令模式只有一些最基本的命令，因此仍要依靠底线命令模式输入更多命令。

### ***\*2. 输入模式\****

***\*在命令模式下按下i就进入了输入模式。\****

在输入模式中，可以使用以下按键：

| ***\*按键\**** | ***\*作用\****          |
| -------------- | ----------------------- |
| 字符按键       | 输入字符                |
| 回车键         | 换行                    |
| 退格键         | 删除光标前一个字符      |
| 删除键         | 删除光标后一个字符      |
| 方向键         | 在文本中移动光标        |
| HOME/END       | 移动光标到行首/行尾     |
| PageUp/Down    | 上/下翻页               |
| Insert         | 切换光标为输入/替换模式 |
| ESC            | 切换到命令模式          |

### ***\*3. 底线命令模式\****

***\*在命令模式下按下:（英文冒号）就进入了底线命令模式。\****

底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。

在底线命令模式中，基本的命令有：

| ***\*命令\**** | ***\*说明\****   |
| -------------- | ---------------- |
| :q             | 退出文件         |
| :w             | 保存文件         |
| ESC键          | 退出底线命令模式 |

简单的说，我们可以将这三个模式想成底下的图标来表示：

![img](file:////tmp/wps-zoyomng/ksohtml/wps9VwZ5Y.png) 

图片发自简书App

## ***\*vi/vim使用实例\****

**·** ***\*使用vi/vim进入一般模式\****

如果你想要使用vi来建立一个名为leon.txt的文件时，你可以这样做：

$vi leon.txt

![img](file:////tmp/wps-zoyomng/ksohtml/wpsmo82HY.png) 

图片发自简书App

直接输入vi文件名就能够进入vi的一般模式了。请注意，记得vi后面一定要加文件名，不管该文件存在与否！

**·** ***\*按下i进入输入模式(也称为编辑模式)，开始编辑文字\****

在一般模式之中，只要按下i,o,a等字符就可以进入输入模式了！

 

![img](file:////tmp/wps-zoyomng/ksohtml/wpszS5Fu1.png) 

图片发自简书App

在编辑模式当中，你可以发现在左下角状态栏中会出现–INSERT-的字样，那就是可以输入任意字符的提示。

这个时候，键盘上除了Esc这个按键之外，其他的按键都可以视作为一般的输入按钮了，所以你可以进行任何的编辑。

**·** ***\*按下ESC按钮回到一般模式\****

好了，假设我已经按照上面的样式给他编辑完毕了，那么应该要如何退出呢？是的！没错！就是给他按下Esc这个按钮即可！马上你就会发现画面左下角的–INSERT–不见了！

 

![img](file:////tmp/wps-zoyomng/ksohtml/wpsR8sTuZ.png) 

图片发自简书App

**·** ***\*在一般模式中按下:wq储存后离开vi\****
OK，我们要存档了，存盘并离开的指令很简单，输入:wq即可保存离开！

![img](file:////tmp/wps-zoyomng/ksohtml/wps0NlnB1.png) 

图片发自简书App

OK!这样我们就成功创建了一个leon.txt的文件。

## ***\*vi/vim按键说明\****

除了上面简易范例的i,Esc,:wq之外，其实vim还有非常多的按键可以使用。

### ***\*第一部份：一般模式可用的光标移动、复制粘贴、搜索替换等\****

***\*移动光标的方法\****

| ***\*按键\****         | ***\*功能\****                                        |
| ---------------------- | ----------------------------------------------------- |
| h或向左箭头键(←)       | 光标向左移动一个字符                                  |
| j或向下箭头键(↓)       | 光标向下移动一个字符                                  |
| k或向上箭头键(↑)       | 光标向上移动一个字符                                  |
| l或向右箭头键(→)       | 光标向右移动一个字符                                  |
| [Ctrl]+[f]或[PageDown] | 屏幕『向下』移动一页(常用)                            |
| [Ctrl]+[b]或[PageUp]   | 屏幕『向上』移动一页(常用)                            |
| [Ctrl]+[d]             | 屏幕『向下』移动半页                                  |
| [Ctrl]+[u]             | 屏幕『向上』移动半页                                  |
| +                      | 光标移动到非空格符的下一行                            |
| -                      | 光标移动到非空格符的上一行                            |
| n<space>               | 按下数字后再按空格键，光标会向右移动这一行的n个字符。 |
| 0或功能键[Home]        | 移动到这一行的最前面字符处(常用)                      |
| $或功能键[End]         | 移动到这一行的最后面字符处(常用)                      |
| H                      | 光标移动到这个屏幕的最上方那一行的第一个字符          |
| M                      | 光标移动到这个屏幕的中央那一行的第一个字符            |
| L                      | 光标移动到这个屏幕的最下方那一行的第一个字符          |
| G                      | 移动到这个档案的最后一行(常用)                        |
| nG n为数字。           | 移动到这个档案的第n行。                               |
| gg                     | 移动到这个档案的第一行，相当于1G(常用)                |
| n<Enter>               | 光标向下移动n行(常用)                                 |

如果你将右手放在键盘上的话，你会发现hjkl是排列在一起的，因此可以使用这四个按钮来移动光标。如果想要进行多次移动的话，例如向下移动30行，可以使用"30j"或"30↓"的组合按键，亦即加上想要进行的次数(数字)后，按下动作即可！

***\*查找\****

**·** ***\*/word\**** 向光标之下寻找一个名称为word的字符串。例如要在档案内搜寻vbird这个字符串，就输入/vbird即可！(常用)

**·** ***\*?word\**** 向光标之上寻找一个字符串名称为word的字符串。

**·** ***\*n\**** 这个n是英文按键。代表重复前一个搜寻的动作。举例来说，如果刚刚我们执行/vbird去向下搜寻vbird这个字符串，则按下n后，会向下继续搜寻下一个名称为vbird的字符串。如果是执行?vbird的话，那么按下n则会向上继续搜寻名称为vbird的字符串！

**·** ***\*N\**** 这个N是英文按键。与n刚好相反，为『反向』进行前一个搜寻动作。例如/vbird后，按下N则表示『向上』搜寻vbird。

使用/word配合n及N是非常有帮助的！可以让你重复的找到一些你搜寻的关键词！

***\*替换\****

**·** ***\*:n1,n2s/word1/word2/g\**** n1与n2为数字。在第n1与n2行之间寻找word1这个字符串，并将该字符串取代为word2！举例来说，在100到200行之间搜寻vbird并取代为VBIRD则：
『:100,200s/vbird/VBIRD/g』。(常用)

**·** ***\*:1,$s/word1/word2/g或:%s/word1/word2/g\**** 从第一行到最后一行寻找word1字符串，并将该字符串取代为word2！(常用)

**·** ***\*:1,$s/word1/word2/gc或:%s/word1/word2/gc\**** 从第一行到最后一行寻找word1字符串，并将该字符串取代为word2！且在取代前显示提示字符给用户确认(confirm)是否需要取代！(常用)

***\*删除\****

**·** ***\*x,X\**** 在一行字当中，x为向后删除一个字符(相当于[del]按键)，X为向前删除一个字符(相当于[backspace]亦即是退格键)(常用)

**·** ***\*nx\**** n为数字，连续向后删除n个字符。举例来说，我要连续删除10个字符，『10x』。

**·** ***\*dd\**** 删除游标所在的那一整行(常用)
ndd n为数字。删除光标所在的向下n行，例如20dd则是删除20行(常用)

**·** ***\*d1G\**** 删除光标所在到第一行的所有数据

**·** ***\*dG\**** 删除光标所在到最后一行的所有数据

**·** ***\*d$\**** 删除游标所在处，到该行的最后一个字符

**·** ***\*d0\**** 那个是数字的0，删除游标所在处，到该行的最前面一个字符

***\*复制粘贴\****

**·** ***\*yy\**** 复制游标所在的那一行(常用)

**·** ***\*nyy\**** n为数字。复制光标所在的向下n行，例如20yy则是复制20行(常用)

**·** ***\*y1G\**** 复制游标所在行到第一行的所有数据

**·** ***\*yG\**** 复制游标所在行到最后一行的所有数据

**·** ***\*y0\**** 复制光标所在的那个字符到该行行首的所有数据

**·** ***\*y$\**** 复制光标所在的那个字符到该行行尾的所有数据

**·** ***\*p,P\**** p为将已复制的数据在光标下一行贴上，P则为贴在游标上一行！举例来说，我目前光标在第20行，且已经复制了10行数据。则按下p后，那10行数据会贴在原本的20行之后，亦即由21行开始贴。但如果是按下P呢？那么原本的第20行会被推到变成30行。(常用)

**·** ***\*J\**** 将光标所在行与下一行的数据结合成同一行

**·** ***\*c\**** 重复删除多个数据，例如向下删除10行，[10cj]

**·** ***\*u\**** 复原前一个动作。(常用)

**·** ***\*[Ctrl]+r\**** 重做上一个动作。(常用)

这个u与[Ctrl]+r是很常用的指令！一个是复原，另一个则是重做一次～利用这两个功能按键，你的编辑，嘿嘿！很快乐的啦！

**·** ***\*.\**** 不要怀疑！这就是小数点！意思是重复前一个动作的意思。如果你想要重复删除、重复贴上等等动作，按下小数点『.』就好了！(常用)

### ***\*第二部份：一般模式切换到编辑模式的可用的按钮说明\****

***\*进入输入或取代的编辑模式\****

**·** ***\*i，I\**** 进入输入模式(Insertmode)：
i为『从目前光标所在处输入』，I为『在目前所在行的第一个非空格符处开始输入』。(常用)

**·** ***\*a,A\**** 进入输入模式(Insertmode)：
a为『从目前光标所在的下一个字符处开始输入』，A为『从光标所在行的最后一个字符处开始输入』。(常用)

**·** ***\*o,O\**** 进入输入模式(Insertmode)：
这是英文字母o的大小写。o为『在目前光标所在的下一行处输入新的一行』；O为在目前光标所在处的上一行输入新的一行！(常用)

**·** ***\*r,R\**** 进入取代模式(Replacemode)：
r只会取代光标所在的那一个字符一次；R会一直取代光标所在的文字，直到按下ESC为止；(常用)

上面这些按键中，在vi画面的左下角处会出现『--INSERT--』或『--REPLACE--』的字样。由名称就知道该动作了吧！！特别注意的是，我们上面也提过了，你想要在档案里面输入字符时，一定要在左下角处看到INSERT或REPLACE才能输入喔！

**·** ***\*[Esc]\**** 退出编辑模式，回到一般模式中(常用)

### ***\*第三部份：一般模式切换到指令行模式的可用的按钮说明\****

***\*指令行的储存、离开等指令\****

**·** ***\*:w\**** 将编辑的数据写入硬盘档案中(常用)

**·** ***\*:w!\**** 若文件属性为『只读』时，强制写入该档案。不过，到底能不能写入，还是跟你对该档案的档案权限有关啊！

**·** ***\*:q\**** 离开vi(常用)

**·** ***\*:q!\**** 若曾修改过档案，又不想储存，使用!为强制离开不储存档案。

**·** ***\*:e!\**** 放弃所有修改，并重新打开档案。

注意一下啊，那个惊叹号(!)在vi当中，常常具有『强制』的意思～

**·** ***\*:wq\**** 储存后离开，若为:wq!则为强制储存后离开(常用)

**·** ***\*ZZ\**** 这是大写的Z喔！若档案没有更动，则不储存离开，若档案已经被更动过，则储存后离开！

**·** ***\*:w[filename]\**** 将编辑的数据储存成另一个档案（类似另存新档）

**·** ***\*:r[filename]\**** 在编辑的数据中，读入另一个档案的数据。亦即将『filename』这个档案内容加到游标所在行后面

**·** ***\*:n1,n2w[filename]\**** 将n1到n2的内容储存成filename这个档案。

**·** ***\*:!command\**** 暂时离开vi到指令行模式下执行command的显示结果！例如
『:!ls/home』即可在vi当中察看/home底下以ls输出的档案信息！

· ctrl +D 查看可能得补全

· % 查找配对的括号，()[]{}
***\*vim环境的设置\**** 

| ***\*命令\**** | ***\*说明\****  |
| -------------- | --------------- |
| :set nu        | 显示行号        |
| :set nonu      | 取消行号！      |
| :set ic        | 忽略大小写      |
| :set is        | 部分匹配（like) |
| :set hls       | 高亮匹配        |

***\*文件操作\****

| ***\*命令\**** | ***\*说明\****           |
| -------------- | ------------------------ |
| :e + filename  | 打开新文件               |
| :r + filename  | 读取文件并插入到当前文件 |

***\*分屏启动vim\****

| ***\*命令\****         | ***\*说明\**** |
| ---------------------- | -------------- |
| vim -on file1 file2... | 水平分屏       |
| vim -On file1 file2... | 垂直分屏       |

***\*关闭分屏\****

| ***\*命令\**** | ***\*说明\****                           |
| -------------- | ---------------------------------------- |
| Ctrl + wc      | 关闭当前窗口（如果是最后一个，无法关闭)  |
| Ctrl + wq      | 关闭当前窗口（如果是最后一个，则退出vim) |

***\*分屏\****

| ***\*命令\**** | ***\*说明\****               |
| -------------- | ---------------------------- |
| Ctrl + ws      | 上下分屏                     |
| Ctrl + wv      | 左右分屏                     |
| :sp filename   | 左右分屏，且打开一个新的文件 |
| :vsp filename  | 上下分屏，且打开一个新的文件 |

***\*切换分屏（光标切换）\****

| ***\*命令\**** | ***\*说明\****               |
| -------------- | ---------------------------- |
| Ctrl + wl      | 光标切换到当前屏的右边那个屏 |
| Ctrl + wh      | 光标切换到当前屏的左边那个屏 |
| Ctrl + wj      | 光标切换到当前屏的上边那个屏 |
| Ctrl + wk      | 光标切换到当前屏的下边那个屏 |

***\*上下分屏尺寸调整\****

| ***\*命令\**** | ***\*说明\****   |
| -------------- | ---------------- |
| Ctrl + w =     | 所有屏一样高度   |
| Ctrl + w +     | 增加当前屏的高度 |
| Ctrl + w -     | 减少当前屏的高度 |